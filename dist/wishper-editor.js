!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("VueWishperEditor",[],e):"object"==typeof exports?exports.VueWishperEditor=e():t.VueWishperEditor=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=6)}([function(t,e,n){"use strict";function i(t){n(12)}var o=n(5),r=n(14),a=n(3),s=i,c=a(o.a,r.a,!1,s,null,null);e.a=c.exports},function(t,e){function n(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=i(o);return[n].concat(o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"})).concat([r]).join("\n")}return[n].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=n(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],i=l[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(r(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var a=[],o=0;o<n.parts.length;o++)a.push(r(n.parts[o]));l[n.id]={id:n.id,refs:1,parts:a}}}}function o(){var t=document.createElement("style");return t.type="text/css",f.appendChild(t),t}function r(t){var e,n,i=document.querySelector("style["+m+'~="'+t.id+'"]');if(i){if(h)return g;i.parentNode.removeChild(i)}if(y){var r=d++;i=p||(p=o()),e=a.bind(null,i,r,!1),n=a.bind(null,i,r,!0)}else i=o(),e=s.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}function a(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=_(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function s(t,e){var n=e.css,i=e.media,o=e.sourceMap;if(i&&t.setAttribute("media",i),v.ssrId&&t.setAttribute(m,e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(10),l={},f=c&&(document.head||document.getElementsByTagName("head")[0]),p=null,d=0,h=!1,g=function(){},v=null,m="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n,o){h=n,v=o||{};var r=u(t,e);return i(r),function(e){for(var n=[],o=0;o<r.length;o++){var a=r[o],s=l[a.id];s.refs--,n.push(s)}e?(r=u(t,e),i(r)):r=[];for(var o=0;o<n.length;o++){var s=n[o];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete l[s.id]}}}};var _=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e,n,i,o,r){var a,s=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(a=t,s=t.default);var u="function"==typeof s?s.options:s;e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId=o);var l;if(r?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=l):i&&(l=i),l){var f=u.functional,p=f?u.render:u.beforeCreate;f?(u._injectStyles=l,u.render=function(t,e){return l.call(e),p(t,e)}):u.beforeCreate=p?[].concat(p,l):[l]}return{esModule:a,exports:s,options:u}}},function(t,e,n){"use strict";var i=(n(11),n(15),n(0));e.a={name:"w-editor",components:{"w-icon":i.a},model:{prop:"value",event:"change"},props:{value:{type:String},fontSize:{type:Number,default:function(){return 14}},fontColor:{type:String,default:function(){return"#303133"}},placeholder:{type:String,default:""}},data:function(){return{icon_group_top:14,show_icon_group:!1,content_len:1,is_focus:!1,focus_item_idx:0}},methods:{deleteKeyUpEvent:function(){this.content_len=this.getContentChildLength()},enterKeyUpEvent:function(){this.content_len++,this.focus_item_idx=this.getFocusEditorItem()},directionKeyUpEvent:function(){this.setIconGroupLocation(),this.focus_item_idx=this.getFocusEditorItem()},stopDeleteEvent:function(t){1===this.content_len&&this.show_icon_group&&t.preventDefault()},editorClick:function(){this.setIconGroupLocation(),this.is_focus=!0,this.focus_item_idx=this.getFocusEditorItem()},editorBlur:function(){this.is_focus=!1,this.show_icon_group=!1},getFocusEditorItem:function(){for(var t=this.getSelectionRange(),e=t.commonAncestorContainer.parentNode,n=0;n<e.children.length;n++){if(e.children[n].offsetTop===this.icon_group_top)return n}},openUploadImageInput:function(){this.$refs.uploadImageInput.click()},getTheUploadImage:function(){var t=this,e=new FileReader;e.readAsDataURL(this.$refs.uploadImageInput.files[0]),e.onload=function(e){t.insertImageToDom(e.srcElement.result,t.focus_item_idx)}},insertImageToDom:function(t,e){var n=this,i=document.createElement("p");i.style.margin=0;var o=document.createElement("img");o.src=t,o.style.width="calc(100% + 40px)",o.style.marginLeft="-20px";var r=this.$refs.contentHTML.childNodes[e];i.appendChild(o),r.parentNode.insertBefore(i,r),setTimeout(function(){n.setIconGroupLocation(),n.getSelectionRange().setStart(r,0)})},getSelectionRange:function(){return window.getSelection().getRangeAt(0)},getContentChildLength:function(){var t=0,e=this.$refs.contentHTML,n=!0,i=!1,o=void 0;try{for(var r,a=e.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){"P"===r.value.nodeName&&t++}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t},setIconGroupLocation:function(){var t=this.getSelectionRange();this.icon_group_top=t.commonAncestorContainer.offsetTop,this.show_icon_group=""===t.commonAncestorContainer.textContent}}}},function(t,e,n){"use strict";function i(){return"fa-"+(r++).toString(16)}var o={};e.a={name:"icon",props:{name:{type:String,validator:function(t){return t?t in o||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?o[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,e=t.width,n=t.height;return Math.max(e,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,n,o){var r=i();return e[o]=r,' id="'+r+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,n,i,o){var r=n||o;return r&&e[r]?"#"+e[r]:t}),t}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(e){e.outerScale=t.normalizedScale});var e=0,n=0;this.$children.forEach(function(t){e=Math.max(e,t.width),n=Math.max(n,t.height)}),this.childrenWidth=e,this.childrenHeight=n,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(n-t.height)/2})}},register:function(t){for(var e in t){var n=t[e];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),o[e]=n}},icons:o};var r=870711},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o={install:function(t,e){t.component(i.a.name,i.a)}};e.default=o},function(t,e,n){"use strict";function i(t){n(8)}var o=n(4),r=n(16),a=n(3),s=i,c=a(o.a,r.a,!1,s,"data-v-3da2936e",null);e.a=c.exports},function(t,e,n){var i=n(9);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(2)("3ab43ff8",i,!0,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,".flex-row[data-v-3da2936e]{display:flex;flex-direction:row}.flex-column[data-v-3da2936e]{display:flex;flex-direction:column}.wishper-editor-container[data-v-3da2936e]{width:100%}.content-container[data-v-3da2936e]{text-align:left;position:relative}.content-container .content-inner[data-v-3da2936e]:focus{outline:none}.content-container .content-inner .content[data-v-3da2936e]{padding:0 20px}.icon-btn-group-container[data-v-3da2936e]{position:absolute;right:20px;justify-content:center;align-items:center}.icon-btn-group-container .icon-item[data-v-3da2936e]{cursor:pointer;margin-left:5px;margin-right:5px}.image-close-btn[data-v-3da2936e]{position:absolute;justify-content:center;align-items:center;width:30px;height:30px;background-color:#f56c6c;border-radius:50%;cursor:pointer;right:30px}",""])},function(t,e){t.exports=function(t,e){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],a=r[0],s=r[1],c=r[2],u=r[3],l={id:t+":"+o,css:s,media:c,sourceMap:u};i[a]?i[a].parts.push(l):n.push(i[a]={id:a,parts:[l]})}return n}},function(t,e,n){"use strict";n(0).a.register({times:{width:384,height:512,paths:[{d:"M323.1 441L377 387.1C386.4 377.7 386.4 362.6 377 353.2L279.8 256 377 158.8C386.4 149.4 386.4 134.3 377 124.9L323.1 71C313.7 61.6 298.6 61.6 289.2 71L192 168.2 94.8 71C85.4 61.6 70.3 61.6 60.9 71L7 124.9C-2.4 134.3-2.4 149.4 7 158.8L104.2 256 7 353.2C-2.4 362.6-2.4 377.7 7 387.1L60.9 441C70.3 450.4 85.4 450.4 94.8 441L192 343.8 289.2 441C298.5 450.3 313.7 450.3 323.1 441z"}]}})},function(t,e,n){var i=n(13);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(2)("060aee96",i,!0,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,".fa-icon{display:inline-block;fill:currentColor}.fa-flip-horizontal{transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-spin{animation:fa-spin 1s 0s infinite linear}.fa-inverse{color:#fff}.fa-pulse{animation:fa-spin 1s infinite steps(8)}@keyframes fa-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""])},function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e,i){return n("path",t._b({key:"path-"+i},"path",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e,i){return n("polygon",t._b({key:"polygon-"+i},"polygon",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[n("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},o=[],r={render:i,staticRenderFns:o};e.a=r},function(t,e,n){"use strict";n(0).a.register({camera:{width:512,height:512,paths:[{d:"M512 144V432C512 458.5 490.5 480 464 480H48C21.5 480 0 458.5 0 432V144C0 117.5 21.5 96 48 96H136L148.3 63.1C155.3 44.4 173.2 32 193.2 32H318.7C338.7 32 356.6 44.4 363.6 63.1L376 96H464C490.5 96 512 117.5 512 144zM376 288C376 221.8 322.2 168 256 168S136 221.8 136 288 189.8 408 256 408 376 354.2 376 288zM344 288C344 336.5 304.5 376 256 376S168 336.5 168 288 207.5 200 256 200 344 239.5 344 288z"}]}})},function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wishper-editor-container flex-column"},[n("div",{staticClass:"inner-container flex-column"},[n("div",{staticClass:"content-container",style:{"font-size":t.fontSize+"px"}},[n("div",{staticClass:"content-inner",attrs:{contenteditable:"true"},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete"])?t.deleteKeyUpEvent(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.enterKeyUpEvent(e):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.directionKeyUpEvent(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.directionKeyUpEvent(e):null},function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:t.directionKeyUpEvent(e):null},function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?"button"in e&&2!==e.button?null:t.directionKeyUpEvent(e):null}],keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete"]))return null;t.stopDeleteEvent(e)},click:t.setIconGroupLocation,input:t.setIconGroupLocation,blur:t.editorBlur}},[n("div",{ref:"contentHTML",staticClass:"content",on:{click:function(e){return e.stopPropagation(),t.editorClick(e)}}},[t._m(0)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show_icon_group,expression:"show_icon_group"}],staticClass:"tools icon-btn-group-container flex-row",style:{top:t.icon_group_top+"px"},attrs:{contenteditable:"false"}},[n("div",{staticClass:"icon-item",on:{click:function(e){return e.stopPropagation(),t.openUploadImageInput(e)}}},[n("w-icon",{attrs:{name:"camera",scale:""+t.fontSize/14}}),t._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadImageInput",attrs:{type:"file",maxlength:"1",accept:"image/png, image/jpeg, image/jpg"},on:{change:t.getTheUploadImage}})],1)])])])])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("br")])}],r={render:i,staticRenderFns:o};e.a=r}])});
//# sourceMappingURL=wishper-editor.js.map