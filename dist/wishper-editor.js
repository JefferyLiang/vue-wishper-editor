!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VueWishperEditor",[],t):"object"==typeof exports?exports.VueWishperEditor=t():e.VueWishperEditor=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=6)}([function(e,t,n){"use strict";function o(e){n(12)}var i=n(5),r=n(14),a=n(3),s=o,c=a(i.a,r.a,!1,s,null,null);t.a=c.exports},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=o(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([r]).join("\n")}return[n].join("\n")}function o(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var o=n(t,e);return t[2]?"@media "+t[2]+"{"+o+"}":o}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){function o(e){for(var t=0;t<e.length;t++){var n=e[t],o=l[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(r(n.parts[i]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(r(n.parts[i]));l[n.id]={id:n.id,refs:1,parts:a}}}}function i(){var e=document.createElement("style");return e.type="text/css",f.appendChild(e),e}function r(e){var t,n,o=document.querySelector("style["+m+'~="'+e.id+'"]');if(o){if(h)return v;o.parentNode.removeChild(o)}if(y){var r=d++;o=p||(p=i()),t=a.bind(null,o,r,!1),n=a.bind(null,o,r,!0)}else o=i(),t=s.bind(null,o),n=function(){o.parentNode.removeChild(o)};return t(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;t(e=o)}else n()}}function a(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=_(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function s(e,t){var n=t.css,o=t.media,i=t.sourceMap;if(o&&e.setAttribute("media",o),g.ssrId&&e.setAttribute(m,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(10),l={},f=c&&(document.head||document.getElementsByTagName("head")[0]),p=null,d=0,h=!1,v=function(){},g=null,m="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n,i){h=n,g=i||{};var r=u(e,t);return o(r),function(t){for(var n=[],i=0;i<r.length;i++){var a=r[i],s=l[a.id];s.refs--,n.push(s)}t?(r=u(e,t),o(r)):r=[];for(var i=0;i<n.length;i++){var s=n[i];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete l[s.id]}}}};var _=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,n,o,i,r){var a,s=e=e||{},c=typeof e.default;"object"!==c&&"function"!==c||(a=e,s=e.default);var u="function"==typeof s?s.options:s;t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId=i);var l;if(r?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=l):o&&(l=o),l){var f=u.functional,p=f?u.render:u.beforeCreate;f?(u._injectStyles=l,u.render=function(e,t){return l.call(t),p(e,t)}):u.beforeCreate=p?[].concat(p,l):[l]}return{esModule:a,exports:s,options:u}}},function(e,t,n){"use strict";var o=(n(11),n(15),n(0));t.a={name:"w-editor",components:{"w-icon":o.a},model:{prop:"value",event:"change"},props:{value:{type:String},fontSize:{type:Number,default:function(){return 14}},fontColor:{type:String,default:function(){return"#303133"}},placeholder:{type:String,default:""}},data:function(){return{icon_group_top:14,show_icon_group:!1,content_len:1,is_focus:!1,focus_item_idx:0,show_placeholder:!0}},methods:{deleteKeyUpEvent:function(){this.content_len=this.getContentChildLength()},enterKeyUpEvent:function(){this.content_len++,this.focus_item_idx=this.getFocusEditorItem()},inputEvent:function(){""===this.$refs.contentHTML.children[0].textContent?this.show_placeholder=!0:this.show_placeholder=!1,this.setIconGroupLocation()},directionKeyUpEvent:function(){this.setIconGroupLocation(),this.focus_item_idx=this.getFocusEditorItem()},stopDeleteEvent:function(e){1===this.content_len&&this.show_icon_group&&"BR"===this.$refs.contentHTML.children[0].children[0].nodeName&&e.preventDefault()},editorClick:function(){this.setIconGroupLocation(),this.is_focus=!0,this.focus_item_idx=this.getFocusEditorItem()},editorBlur:function(){this.is_focus=!1,this.show_icon_group=!1},getFocusEditorItem:function(){for(var e=this.getSelectionRange(),t=e.commonAncestorContainer.parentNode,n=0;n<t.children.length;n++){if(t.children[n].offsetTop===this.icon_group_top)return n}},openUploadImageInput:function(){this.$refs.uploadImageInput.click()},getTheUploadImage:function(){var e=this,t=new FileReader;t.readAsDataURL(this.$refs.uploadImageInput.files[0]),t.onload=function(t){e.insertImageToDom(t.srcElement.result,e.focus_item_idx)}},insertImageToDom:function(e,t){var n=this,o=document.createElement("p");o.style.margin=0;var i=document.createElement("img");i.src=e,i.style.width="calc(100% + 40px)",i.style.marginLeft="-20px";var r=this.$refs.contentHTML.childNodes[t];o.appendChild(i),r.parentNode.insertBefore(o,r),setTimeout(function(){n.setIconGroupLocation(),n.getSelectionRange().setStart(r,0)})},getSelectionRange:function(){return window.getSelection().getRangeAt(0)},getContentChildLength:function(){var e=0,t=this.$refs.contentHTML,n=!0,o=!1,i=void 0;try{for(var r,a=t.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){"P"===r.value.nodeName&&e++}}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return e},setIconGroupLocation:function(){var e=this.getSelectionRange();this.icon_group_top=e.commonAncestorContainer.offsetTop,this.show_icon_group=""===e.commonAncestorContainer.textContent}}}},function(e,t,n){"use strict";function o(){return"fa-"+(r++).toString(16)}var i={};t.a={name:"icon",props:{name:{type:String,validator:function(e){return e?e in i||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+e+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(e){return"horizontal"===e||"vertical"===e}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?i[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var e=this.icon,t=e.width,n=e.height;return Math.max(t,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var e=this.icon.raw,t={};return e=e.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(e,n,i){var r=o();return t[i]=r,' id="'+r+'"'}),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(e,n,o,i){var r=n||i;return r&&t[r]?"#"+t[r]:e}),e}},mounted:function(){var e=this;if(!this.icon){this.$children.forEach(function(t){t.outerScale=e.normalizedScale});var t=0,n=0;this.$children.forEach(function(e){t=Math.max(t,e.width),n=Math.max(n,e.height)}),this.childrenWidth=t,this.childrenHeight=n,this.$children.forEach(function(e){e.x=(t-e.width)/2,e.y=(n-e.height)/2})}},register:function(e){for(var t in e){var n=e[t];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),i[t]=n}},icons:i};var r=870711},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i={install:function(e,t){e.component(o.a.name,o.a)}};t.default=i},function(e,t,n){"use strict";function o(e){n(8)}var i=n(4),r=n(16),a=n(3),s=o,c=a(i.a,r.a,!1,s,"data-v-9e5916f4",null);t.a=c.exports},function(e,t,n){var o=n(9);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("782f0b6c",o,!0,{})},function(e,t,n){t=e.exports=n(1)(!1),t.push([e.i,".flex-row[data-v-9e5916f4]{display:flex;flex-direction:row}.flex-column[data-v-9e5916f4]{display:flex;flex-direction:column}.wishper-editor-container[data-v-9e5916f4]{width:100%}.content-container[data-v-9e5916f4]{text-align:left;position:relative}.content-container .content-inner[data-v-9e5916f4]:focus{outline:none}.content-container .content-inner .content[data-v-9e5916f4]{padding:0 20px}.icon-btn-group-container[data-v-9e5916f4]{position:absolute;right:20px;justify-content:center;align-items:center}.icon-btn-group-container .icon-item[data-v-9e5916f4]{cursor:pointer;margin-left:5px;margin-right:5px}.image-close-btn[data-v-9e5916f4]{position:absolute;justify-content:center;align-items:center;width:30px;height:30px;background-color:#f56c6c;border-radius:50%;cursor:pointer;right:30px}.placeholder-container[data-v-9e5916f4]{position:absolute;top:14px;left:20px;color:#555}",""])},function(e,t){e.exports=function(e,t){for(var n=[],o={},i=0;i<t.length;i++){var r=t[i],a=r[0],s=r[1],c=r[2],u=r[3],l={id:e+":"+i,css:s,media:c,sourceMap:u};o[a]?o[a].parts.push(l):n.push(o[a]={id:a,parts:[l]})}return n}},function(e,t,n){"use strict";n(0).a.register({times:{width:384,height:512,paths:[{d:"M323.1 441L377 387.1C386.4 377.7 386.4 362.6 377 353.2L279.8 256 377 158.8C386.4 149.4 386.4 134.3 377 124.9L323.1 71C313.7 61.6 298.6 61.6 289.2 71L192 168.2 94.8 71C85.4 61.6 70.3 61.6 60.9 71L7 124.9C-2.4 134.3-2.4 149.4 7 158.8L104.2 256 7 353.2C-2.4 362.6-2.4 377.7 7 387.1L60.9 441C70.3 450.4 85.4 450.4 94.8 441L192 343.8 289.2 441C298.5 450.3 313.7 450.3 323.1 441z"}]}})},function(e,t,n){var o=n(13);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("060aee96",o,!0,{})},function(e,t,n){t=e.exports=n(1)(!1),t.push([e.i,".fa-icon{display:inline-block;fill:currentColor}.fa-flip-horizontal{transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-spin{animation:fa-spin 1s 0s infinite linear}.fa-inverse{color:#fff}.fa-pulse{animation:fa-spin 1s infinite steps(8)}@keyframes fa-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""])},function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{class:e.klass,style:e.style,attrs:{version:"1.1",role:e.label?"img":"presentation","aria-label":e.label,x:e.x,y:e.y,width:e.width,height:e.height,viewBox:e.box}},[e._t("default",[e.icon&&e.icon.paths?e._l(e.icon.paths,function(t,o){return n("path",e._b({key:"path-"+o},"path",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.polygons?e._l(e.icon.polygons,function(t,o){return n("polygon",e._b({key:"polygon-"+o},"polygon",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.raw?[n("g",{domProps:{innerHTML:e._s(e.raw)}})]:e._e()])],2)},i=[],r={render:o,staticRenderFns:i};t.a=r},function(e,t,n){"use strict";n(0).a.register({camera:{width:512,height:512,paths:[{d:"M512 144V432C512 458.5 490.5 480 464 480H48C21.5 480 0 458.5 0 432V144C0 117.5 21.5 96 48 96H136L148.3 63.1C155.3 44.4 173.2 32 193.2 32H318.7C338.7 32 356.6 44.4 363.6 63.1L376 96H464C490.5 96 512 117.5 512 144zM376 288C376 221.8 322.2 168 256 168S136 221.8 136 288 189.8 408 256 408 376 354.2 376 288zM344 288C344 336.5 304.5 376 256 376S168 336.5 168 288 207.5 200 256 200 344 239.5 344 288z"}]}})},function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wishper-editor-container flex-column"},[n("div",{staticClass:"inner-container flex-column"},[n("div",{staticClass:"content-container",style:{"font-size":e.fontSize+"px"}},[n("div",{staticClass:"content-inner",attrs:{contenteditable:"true"},on:{keyup:[function(t){return"button"in t||!e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete"])?e.deleteKeyUpEvent(t):null},function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.enterKeyUpEvent(t):null},function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?e.directionKeyUpEvent(t):null},function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?e.directionKeyUpEvent(t):null},function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?"button"in t&&0!==t.button?null:e.directionKeyUpEvent(t):null},function(t){return"button"in t||!e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?"button"in t&&2!==t.button?null:e.directionKeyUpEvent(t):null}],keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete"]))return null;e.stopDeleteEvent(t)},click:e.setIconGroupLocation,input:e.inputEvent,blur:e.editorBlur}},[n("div",{ref:"contentHTML",staticClass:"content",on:{click:function(t){return t.stopPropagation(),e.editorClick(t)}}},[e._m(0)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show_icon_group,expression:"show_icon_group"}],staticClass:"tools icon-btn-group-container flex-row",style:{top:e.icon_group_top+"px"},attrs:{contenteditable:"false"}},[n("div",{staticClass:"icon-item",on:{click:function(t){return t.stopPropagation(),e.openUploadImageInput(t)}}},[n("w-icon",{attrs:{name:"camera",scale:""+e.fontSize/14}}),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadImageInput",attrs:{type:"file",maxlength:"1",accept:"image/png, image/jpeg, image/jpg"},on:{change:e.getTheUploadImage}})],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show_placeholder,expression:"show_placeholder"}],staticClass:"placeholder-container",style:{"font-size":e.fontSize+"px"},attrs:{contenteditable:"false"}},[e._v("\n          "+e._s(e.placeholder)+"\n        ")])])])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("br")])}],r={render:o,staticRenderFns:i};t.a=r}])});
//# sourceMappingURL=wishper-editor.js.map